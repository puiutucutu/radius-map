!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("leaflet")):"function"==typeof define&&define.amd?define(["exports","leaflet"],t):t((e=e||self).rm={},e.L)}(this,(function(e,t){"use strict";var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e,t){return e(t={exports:{}},t.exports),t.exports}var i=function(e){return e&&e.Math==Math&&e},o=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof r&&r)||Function("return this")(),a=function(e){try{return!!e()}catch(e){return!0}},u=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),c={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,l={f:f&&!c.call({1:2},1)?function(e){var t=f(this,e);return!!t&&t.enumerable}:c},s=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},d={}.toString,p=function(e){return d.call(e).slice(8,-1)},y="".split,h=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==p(e)?y.call(e,""):Object(e)}:Object,v=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},g=function(e){return h(v(e))},b=function(e){return"object"==typeof e?null!==e:"function"==typeof e},m=function(e,t){if(!b(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!b(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!b(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!b(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},w={}.hasOwnProperty,S=function(e,t){return w.call(e,t)},E=o.document,k=b(E)&&b(E.createElement),C=!u&&!a((function(){return 7!=Object.defineProperty((e="div",k?E.createElement(e):{}),"a",{get:function(){return 7}}).a;var e})),O=Object.getOwnPropertyDescriptor,j={f:u?O:function(e,t){if(e=g(e),t=m(t,!0),C)try{return O(e,t)}catch(e){}if(S(e,t))return s(!l.f.call(e,t),e[t])}},I=function(e){if(!b(e))throw TypeError(String(e)+" is not an object");return e},P=Object.defineProperty,T={f:u?P:function(e,t,r){if(I(e),t=m(t,!0),I(r),C)try{return P(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},M=u?function(e,t,r){return T.f(e,t,s(1,r))}:function(e,t,r){return e[t]=r,e},R=function(e,t){try{M(o,e,t)}catch(r){o[e]=t}return t},D=o["__core-js_shared__"]||R("__core-js_shared__",{}),x=Function.toString;"function"!=typeof D.inspectSource&&(D.inspectSource=function(e){return x.call(e)});var _,A,B,z,F=D.inspectSource,N=o.WeakMap,G="function"==typeof N&&/native code/.test(F(N)),q=n((function(e){(e.exports=function(e,t){return D[e]||(D[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.4",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),W=0,K=Math.random(),V=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++W+K).toString(36)},Y=q("keys"),Z={},H=o.WeakMap;if(G){var J=new H,Q=J.get,U=J.has,X=J.set;_=function(e,t){return X.call(J,e,t),t},A=function(e){return Q.call(J,e)||{}},B=function(e){return U.call(J,e)}}else{var $=Y[z="state"]||(Y[z]=V(z));Z[$]=!0,_=function(e,t){return M(e,$,t),t},A=function(e){return S(e,$)?e[$]:{}},B=function(e){return S(e,$)}}var ee,te,re={set:_,get:A,has:B,enforce:function(e){return B(e)?A(e):_(e,{})},getterFor:function(e){return function(t){var r;if(!b(t)||(r=A(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}},ne=n((function(e){var t=re.get,r=re.enforce,n=String(String).split("String");(e.exports=function(e,t,i,a){var u=!!a&&!!a.unsafe,c=!!a&&!!a.enumerable,f=!!a&&!!a.noTargetGet;"function"==typeof i&&("string"!=typeof t||S(i,"name")||M(i,"name",t),r(i).source=n.join("string"==typeof t?t:"")),e!==o?(u?!f&&e[t]&&(c=!0):delete e[t],c?e[t]=i:M(e,t,i)):c?e[t]=i:R(t,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||F(this)}))})),ie=o,oe=function(e){return"function"==typeof e?e:void 0},ae=function(e,t){return arguments.length<2?oe(ie[e])||oe(o[e]):ie[e]&&ie[e][t]||o[e]&&o[e][t]},ue=Math.ceil,ce=Math.floor,fe=function(e){return isNaN(e=+e)?0:(e>0?ce:ue)(e)},le=Math.min,se=function(e){return e>0?le(fe(e),9007199254740991):0},de=Math.max,pe=Math.min,ye=function(e){return function(t,r,n){var i,o=g(t),a=se(o.length),u=function(e,t){var r=fe(e);return r<0?de(r+t,0):pe(r,t)}(n,a);if(e&&r!=r){for(;a>u;)if((i=o[u++])!=i)return!0}else for(;a>u;u++)if((e||u in o)&&o[u]===r)return e||u||0;return!e&&-1}},he={includes:ye(!0),indexOf:ye(!1)}.indexOf,ve=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype"),ge={f:Object.getOwnPropertyNames||function(e){return function(e,t){var r,n=g(e),i=0,o=[];for(r in n)!S(Z,r)&&S(n,r)&&o.push(r);for(;t.length>i;)S(n,r=t[i++])&&(~he(o,r)||o.push(r));return o}(e,ve)}},be={f:Object.getOwnPropertySymbols},me=ae("Reflect","ownKeys")||function(e){var t=ge.f(I(e)),r=be.f;return r?t.concat(r(e)):t},we=function(e,t){for(var r=me(t),n=T.f,i=j.f,o=0;o<r.length;o++){var a=r[o];S(e,a)||n(e,a,i(t,a))}},Le=/#|\.prototype\./,Se=function(e,t){var r=ke[Ee(e)];return r==Oe||r!=Ce&&("function"==typeof t?a(t):!!t)},Ee=Se.normalize=function(e){return String(e).replace(Le,".").toLowerCase()},ke=Se.data={},Ce=Se.NATIVE="N",Oe=Se.POLYFILL="P",je=Se,Ie=j.f,Pe=function(e,t,r){if(function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function")}(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}},Te=Array.isArray||function(e){return"Array"==p(e)},Me=!!Object.getOwnPropertySymbols&&!a((function(){return!String(Symbol())})),Re=Me&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,De=q("wks"),xe=o.Symbol,_e=Re?xe:xe&&xe.withoutSetter||V,Ae=function(e){return S(De,e)||(Me&&S(xe,e)?De[e]=xe[e]:De[e]=_e("Symbol."+e)),De[e]},Be=Ae("species"),ze=function(e,t){var r;return Te(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!Te(r.prototype)?b(r)&&null===(r=r[Be])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)},Fe=[].push,Ne=function(e){var t=1==e,r=2==e,n=3==e,i=4==e,o=6==e,a=5==e||o;return function(u,c,f,l){for(var s,d,p=Object(v(u)),y=h(p),g=Pe(c,f,3),b=se(y.length),m=0,w=l||ze,L=t?w(u,b):r?w(u,0):void 0;b>m;m++)if((a||m in y)&&(d=g(s=y[m],m,p),e))if(t)L[m]=d;else if(d)switch(e){case 3:return!0;case 5:return s;case 6:return m;case 2:Fe.call(L,s)}else if(i)return!1;return o?-1:n||i?i:L}},Ge={forEach:Ne(0),map:Ne(1),filter:Ne(2),some:Ne(3),every:Ne(4),find:Ne(5),findIndex:Ne(6)},qe=ae("navigator","userAgent")||"",We=o.process,Ke=We&&We.versions,Ve=Ke&&Ke.v8;Ve?te=(ee=Ve.split("."))[0]+ee[1]:qe&&(!(ee=qe.match(/Edge\/(\d+)/))||ee[1]>=74)&&(ee=qe.match(/Chrome\/(\d+)/))&&(te=ee[1]);var Ye,Ze=te&&+te,He=Ae("species"),Je=Object.defineProperty,Qe={},Ue=function(e){throw e},Xe=Ge.map,$e=(Ye="map",Ze>=51||!a((function(){var e=[];return(e.constructor={})[He]=function(){return{foo:1}},1!==e[Ye](Boolean).foo}))),et=function(e,t){if(S(Qe,e))return Qe[e];t||(t={});var r=[][e],n=!!S(t,"ACCESSORS")&&t.ACCESSORS,i=S(t,0)?t[0]:Ue,o=S(t,1)?t[1]:void 0;return Qe[e]=!!r&&!a((function(){if(n&&!u)return!0;var e={length:-1};n?Je(e,1,{enumerable:!0,get:Ue}):e[1]=1,r.call(e,i,o)}))}("map");function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}!function(e,t){var r,n,i,a,u,c=e.target,f=e.global,l=e.stat;if(r=f?o:l?o[c]||R(c,{}):(o[c]||{}).prototype)for(n in t){if(a=t[n],i=e.noTargetGet?(u=Ie(r,n))&&u.value:r[n],!je(f?n:c+(l?".":"#")+n,e.forced)&&void 0!==i){if(typeof a==typeof i)continue;we(a,i)}(e.sham||i&&i.sham)&&M(a,"sham",!0),ne(r,n,a,e)}}({target:"Array",proto:!0,forced:!$e||!et},{map:function(e){return Xe(this,e,arguments.length>1?arguments[1]:void 0)}});var nt=function(){function e(r,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;tt(this,e),this.map=void 0,this.radiusLimit=void 0,this.layerControl=void 0,this.layerId=void 0,this.editableLayers=void 0,this.updateCallback=void 0,this.errorCallback=void 0,this.map=r,this.updateCallback=n,this.errorCallback=i,this.radiusLimit=o,this.editableLayers=t.featureGroup(),this.map.addLayer(this.editableLayers);var a=new L.Control.Draw({position:"topleft",draw:{circle:!0,circlemarker:!1,marker:!1,polygon:!1,polyline:!1,rectangle:!1},edit:{featureGroup:this.editableLayers,remove:!1}});this.map.addControl(a),this.handleCreatedEvent(),this.handleEditStopEvent(),this.handleEditResize()}var r,n,i;return r=e,(n=[{key:"makeDefaultErrorMessage",value:function(){return"Search radius cannot exceed ".concat(this.radiusLimit/1e3," km")}},{key:"drawCircle",value:function(e,r,n){var i=t.circle([r,n],{radius:e});this.editableLayers.clearLayers(),this.editableLayers.addLayer(i);var o=this.editableLayers.getLayerId(i),a=i.getBounds().getCenter(),u=a.lat,c=a.lng;this.updateCallback(o,e,u,c)}},{key:"handleCreatedEvent",value:function(){var e=this;this.map.on(L.Draw.Event.CREATED,(function(t){var r=t.layer;e.editableLayers.clearLayers(),e.editableLayers.addLayer(r),e.layerId=e.editableLayers.getLayerId(r);var n=r.getRadius(),i=r.getBounds().getCenter(),o=i.lat,a=i.lng;if(e.isRadiusBelowLimit(n))e.updateCallback(e.layerId,n,o,a);else{var u=e.makeDefaultErrorMessage();r.setRadius(e.radiusLimit),e.updateCallback(e.layerId,e.radiusLimit,o,a),e.errorCallback(u)}}))}},{key:"handleEditStopEvent",value:function(){var e=this;this.map.on(L.Draw.Event.EDITSTOP,(function(t){var r=e.editableLayers.getLayer(e.layerId),n=r.getRadius(),i=r.getBounds().getCenter(),o=i.lat,a=i.lng;if(e.isRadiusBelowLimit(n))e.updateCallback(e.layerId,n,o,a);else{var u=e.makeDefaultErrorMessage();r.setRadius(e.radiusLimit),e.updateCallback(e.layerId,e.radiusLimit,o,a),e.errorCallback(u)}}))}},{key:"handleEditResize",value:function(){var e=this;this.map.on(L.Draw.Event.EDITRESIZE,(function(t){var r=t.layer,n=r.getBounds().getCenter(),i=n.lat,o=n.lng,a=r.getRadius();e.updateCallback(e.layerId,a,i,o)}))}},{key:"isRadiusBelowLimit",value:function(e){return e<=this.radiusLimit}},{key:"centerMapOnDrawings",value:function(){this.editableLayers.getLayers().length>0&&this.map.fitBounds(this.editableLayers.getBounds())}}])&&rt(r.prototype,n),i&&rt(r,i),e}();e.RadiusMap=nt,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=radiusmap.umd.js.map
